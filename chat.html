<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Blackjack</title>
<style>
    body {
        background-color: #0b6623;
        font-family: Arial, sans-serif;
        text-align: center;
        color: white;
    }

    h1 { margin-top: 20px; }

    .table {
        margin-top: 20px;
    }

    .cards img {
        width: 80px;
        margin: 5px;
    }

    .controls {
        margin-top: 20px;
    }

    button {
        padding: 10px 20px;
        margin: 5px;
        font-size: 16px;
        border-radius: 5px;
        border: none;
        cursor: pointer;
    }

    #hit { background: #f4c542; }
    #stand { background: #d9534f; color: white; }
    #deal { background: #5bc0de; }
   
    input {
        padding: 5px;
        width: 80px;
        text-align: center;
    }
</style>
</head>
<body>

<h1>üÉè Blackjack</h1>
<h2 id="money">Money: $1000</h2>

<div>
    Bet: $<input type="number" id="bet" value="100" min="1">
</div>

<div class="table">
    <h2>Dealer</h2>
    <div id="dealer-cards" class="cards"></div>
    <div id="dealer-score"></div>

    <h2>You</h2>
    <div id="player-cards" class="cards"></div>
    <div id="player-score"></div>

    <h2 id="message"></h2>
</div>

<div class="controls">
    <button id="deal">Deal</button>
    <button id="hit">Hit</button>
    <button id="stand">Stand</button>
</div>

<script>
let deck = [];
let player = [];
let dealer = [];
let money = 1000;
let currentBet = 0;
let gameOver = true;
let dealerHidden = true;

const backImage = "https://deckofcardsapi.com/static/img/back.png";

function createDeck() {
    const suits = ["S", "H", "D", "C"];
    const values = [
        {code: "A", value: 11},
        {code: "2", value: 2},
        {code: "3", value: 3},
        {code: "4", value: 4},
        {code: "5", value: 5},
        {code: "6", value: 6},
        {code: "7", value: 7},
        {code: "8", value: 8},
        {code: "9", value: 9},
        {code: "0", value: 10},
        {code: "J", value: 10},
        {code: "Q", value: 10},
        {code: "K", value: 10}
    ];

    deck = [];
    for (let suit of suits) {
        for (let val of values) {
            deck.push({
                code: val.code + suit,
                value: val.value,
                image: `https://deckofcardsapi.com/static/img/${val.code}${suit}.png`
            });
        }
    }
}

function shuffle() {
    for (let i = deck.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
    }
}

function dealCard(hand) {
    hand.push(deck.pop());
}

function score(hand) {
    let total = 0;
    let aces = 0;
    for (let card of hand) {
        total += card.value;
        if (card.value === 11) aces++;
    }
    while (total > 21 && aces > 0) {
        total -= 10;
        aces--;
    }
    return total;
}

function render() {
    const playerDiv = document.getElementById("player-cards");
    const dealerDiv = document.getElementById("dealer-cards");

    playerDiv.innerHTML = "";
    dealerDiv.innerHTML = "";

    player.forEach(card => {
        let img = document.createElement("img");
        img.src = card.image;
        playerDiv.appendChild(img);
    });

    dealer.forEach((card, index) => {
        let img = document.createElement("img");
        if (index === 0 && dealerHidden && !gameOver) {
            img.src = backImage;
        } else {
            img.src = card.image;
        }
        dealerDiv.appendChild(img);
    });

    document.getElementById("player-score").textContent =
        "Score: " + score(player);

    document.getElementById("dealer-score").textContent =
        (!dealerHidden || gameOver)
            ? "Score: " + score(dealer)
            : "";
}

function endGame(message) {
    dealerHidden = false;
    gameOver = true;
    document.getElementById("message").textContent = message;
    document.getElementById("money").textContent = "Money: $" + money;
    render();
}

function dealerTurn() {
    while (score(dealer) < 17) {
        dealCard(dealer);
    }
}

function checkWinner() {
    let p = score(player);
    let d = score(dealer);

    if (p > 21) {
        endGame("You busted! You lose $" + currentBet);
    } else if (d > 21) {
        money += currentBet * 2;
        endGame("Dealer busted! You win $" + currentBet);
    } else if (p > d) {
        money += currentBet * 2;
        endGame("You win $" + currentBet);
    } else if (p < d) {
        endGame("Dealer wins! You lose $" + currentBet);
    } else {
        money += currentBet;
        endGame("Push! Bet returned.");
    }
}

document.getElementById("deal").onclick = function() {
    if (!gameOver) return;

    currentBet = parseInt(document.getElementById("bet").value);
    if (currentBet > money || currentBet <= 0) {
        alert("Invalid bet amount.");
        return;
    }

    money -= currentBet;
    document.getElementById("money").textContent = "Money: $" + money;

    createDeck();
    shuffle();
    player = [];
    dealer = [];
    dealerHidden = true;
    gameOver = false;
    document.getElementById("message").textContent = "";

    dealCard(player);
    dealCard(dealer);
    dealCard(player);
    dealCard(dealer);

    render();
};

document.getElementById("hit").onclick = function() {
    if (gameOver) return;
    dealCard(player);
    render();
    if (score(player) > 21) {
        checkWinner();
    }
};

document.getElementById("stand").onclick = function() {
    if (gameOver) return;
    dealerHidden = false;
    dealerTurn();
    checkWinner();
};

render();
</script>

</body>
</html>